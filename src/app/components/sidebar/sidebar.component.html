<!-- Contenedor principal (colapsable) -->
<div class="sidebar" [class.collapsed]="isCollapsed">
  <!-- Encabezado (opcional, para coherencia con navbar) -->
  <div class="sidebar-header">
    <button class="btn btn-icon" (click)="toggleCollapse()">
      <i class="bi bi-chevron-left" *ngIf="!isCollapsed"></i>
      <i class="bi bi-list" *ngIf="isCollapsed"></i>
    </button>
    <h4 *ngIf="!isCollapsed">Mis Chats</h4>
  </div>

  <!-- Botón "Nuevo chat" (visible en ambos estados) -->
  <button class="btn btn-new-chat" (click)="createNewChat()">
    <i class="bi bi-plus-lg"></i>
    <span *ngIf="!isCollapsed">Nuevo chat</span>
  </button>

  <!-- Barra de búsqueda (solo expandido) -->
  <div class="sidebar-search" *ngIf="!isCollapsed">
    <input
      type="text"
      placeholder="Buscar chats..."
      [(ngModel)]="searchQuery"
    />
    <i class="bi bi-search"></i>
  </div>

  <!-- Lista de chats agrupados por fecha (solo expandido) -->
  <div class="chat-history" *ngIf="!isCollapsed">
    <!-- Grupo "Hoy" -->
    <div class="chat-group">
      <h5 class="group-title">Hoy</h5>
      <div
        class="chat-item"
        *ngFor="let chat of todaysChats"
        (click)="selectChat(chat.id)"
      >
        <i class="bi bi-chat-left-text"></i>
        <span>{{ chat.title }}</span>
      </div>
    </div>

    <!-- Grupo "Ayer" -->
    <div class="chat-group" *ngIf="yesterdaysChats.length > 0">
      <h5 class="group-title">Ayer</h5>
      <div
        class="chat-item"
        *ngFor="let chat of yesterdaysChats"
        (click)="selectChat(chat.id)"
      >
        <i class="bi bi-chat-left-text"></i>
        <span>{{ chat.title }}</span>
      </div>
    </div>
  </div>
</div>
